<!DOCTYPE html>
<html lang="en">
<head>
    <title>小白菜 学编程</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta charset="UTF-8">
    <meta name="description" content="一个编程学习网站">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify/themes/vue.css">
    <link rel="stylesheet" href="/assets/css/vue.css">
    <link rel="stylesheet" href="/assets/css/gitalk.css">
    <style type="text/css">
        .markdown-section {
            position: relative;
            overflow: hidden;
        }

        .lock-overlay {
            display: flex; /* Use flex to center the content */
            justify-content: center;
            align-items: center;
            position: absolute;
            top: 40%; /* Start the overlay at 20% of the article height */
            left: 0;
            width: 100%;
            height: 80%; /* Cover the remaining 80% */
            background-color: rgba(255, 255, 255, 0.95);
            text-align: center;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
            z-index: 1000;
        }

        .lock-overlay h2 {
            margin: 20px 0;
            font-size: 24px;
            color: #333;
        }

        .lock-overlay img {
            max-width: 150px;
            margin: 20px 0;
        }

        #unlock-btn {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            background-color: #007bff;
            color: #fff;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        #unlock-btn:hover {
            background-color: #0056b3;
        }

        /* CSS for the copy button */
        .copy-button {
            position: absolute;
            bottom: 5px;
            right: 5px;
            background-color: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
        }

        .copy-button svg {
            width: fit-content;
            height: fit-content;
            fill: #3dc746;
            margin: 0px -5px -24px 0px;
        }

        pre {
            position: relative;
            padding: 10px; /* Add space for the button */
            border: 1px solid #ccc;
        }

        .copy-success {
            position: absolute;
            bottom: 30px;
            right: 10px;
            background-color: #3dc746;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            display: none;
        }
    </style>
</head>
<body>
<div id="app"></div>
<script>
    window.$docsify = {
        name: '小白菜 学编程',
        repo: 'https://github.com/caijianying/caijianying.github.io',
        auto2top: true,
        coverpage: true,
        loadSidebar: true,
        subMaxLevel: 2,
        <!--配置导航栏-->
        loadNavbar: true,
        maxLevel: 4,
        search: {
            paths: 'auto',
            placeholder: '🔍 Type to search ',
            noData: '😞 No Results! ',
            depth: 6
        },
        pagination: {
            previousText: 'PREVIOUS',
            nextText: 'NEXT',
            crossChapter: true
        }
        ,
        plugins: [
            function (hook, vm) {
                hook.doneEach(function () {
                    var label, domObj, main, divEle, gitalk;
                    label = md5(decodeURI(vm.route.path.split("/").pop()));
                    domObj = Docsify.dom;
                    main = domObj.getNode("#main");

                    Array.apply(
                        null,
                        document.querySelectorAll("div.gitalk-container")
                    ).forEach(function (ele) {
                        ele.remove();
                    });

                    divEle = domObj.create("div");
                    divEle.id = "gitalk-container-" + label;
                    divEle.className = "gitalk-container";
                    divEle.style = "width: " + main.clientWidth + "px; margin: 0 auto 20px;";
                    domObj.appendTo(domObj.find(".content"), divEle);

                    let articles = ['Spring如何解决循环依赖问题'];
                    let titleEle = document.querySelector('.sidebar-nav').querySelector('li ul .active a');
                    if (titleEle != null) {
                        const curArticle = titleEle.textContent;
                        console.log(curArticle)
                        console.log(document.cookie)
                        for (let article of articles) {
                            if (curArticle == article) {
                                console.log('加锁成功！')
                                lock()

                            }
                        }
                    }
                    // Add copy button to pre>code block
                    const codeBlocks = document.querySelectorAll('pre > code');
                    codeBlocks.forEach(codeBlock => {
                        const copyButton = document.createElement('button');
                        copyButton.classList.add('copy-button');
                        copyButton.innerHTML = `
            <svg t="1721703489803" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4313" width="25" height="25">
                <path d="M682.666667 341.333333h128v469.333334H341.333333v-128H213.333333V213.333333h469.333334v128z m0 85.333334v256h-256v42.666666h298.666666v-298.666666h-42.666666zM298.666667 298.666667v298.666666h298.666666V298.666667H298.666667z" fill="#3dc746" p-id="4314"></path>
            </svg>
        `;
                        const successMessage = document.createElement('div');
                        successMessage.classList.add('copy-success');
                        successMessage.innerText = '复制成功!';
                        codeBlock.parentElement.style.position = 'relative'; // Ensure the parent element is positioned
                        codeBlock.parentElement.appendChild(copyButton);
                        codeBlock.parentElement.appendChild(successMessage);

                        copyButton.addEventListener('click', () => {
                            // Create a temporary textarea to copy the text
                            const textarea = document.createElement('textarea');
                            textarea.value = codeBlock.innerText;
                            document.body.appendChild(textarea);
                            textarea.select();
                            document.execCommand('copy');
                            document.body.removeChild(textarea);
                            // Provide feedback to the user
                            successMessage.style.display = 'block';
                            setTimeout(() => {
                                successMessage.style.display = 'none';
                            }, 2000);
                        });
                    });

                    // const titles = document.querySelectorAll('ul > :scope > li');
                    // titles.forEach(t=>{
                    //     console.log(t.textContent)
                    // })
                    const actives = document.querySelectorAll('.active');
                    actives.forEach(t=>{
                        console.log(t.textContent)
                    })
                });

                function lock() {
                    const article = document.querySelector('.markdown-section');

                    // Create lock overlay
                    const overlay = document.createElement('div');
                    overlay.classList.add('lock-overlay');
                    overlay.innerHTML = `
                        <h2>扫码或搜索：程序员小白菜</h2>
                        <h2>发送：92631C</h2>
                        <h2>即可立即永久解锁本站所有文章</h2>
                        <img src="./assets/home/img/qrCode.jpg" alt="QR Code">
                        <button id="unlock-btn">Unlock</button>
                    `;

                    // Append overlay to article
                    article.appendChild(overlay);

                    // Display the overlay
                    overlay.style.display = 'block';

                    // Add unlock button event listener
                    const unlockButton = document.getElementById('unlock-btn');
                    unlockButton.addEventListener('click', () => {
                        overlay.style.display = 'none';
                        article.style.maxHeight = 'none';
                        article.style.overflow = 'visible';
                    });
                }
            }
        ]
    }
</script>

<script src="/assets/js/md5.js"></script>
<script src="/assets/js/docsify.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/docsify@4/lib/plugins/search.js"></script>
<script src="/assets/js/docsify-pagination.min.js"></script>
<script src="/assets/js/zoom-image.js"></script>
<script src="/assets/js/prism-bash.js"></script>
<script src="/assets/js/prism-java.min.js"></script>
</body>
</html>
